<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Giỏ hàng - Bloomora</title>
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Montserrat:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Top Bar -->
    <div class="top-bar">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-6">
                    <div class="hotline">
                        <i class="fas fa-phone"></i>
                        <span>Hotline: 1900 1234</span>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="top-links">
                        <a href="auth/login.html">Đăng nhập</a>
                        <a href="auth/register.html">Đăng ký</a>
                        <a href="cart.html">
                            <i class="fas fa-shopping-cart"></i>
                            Giỏ hàng
                        </a>
                        <a href="checkout.html">
                            <i class="fas fa-credit-card"></i>
                            Thanh toán
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Header -->
    <header class="main-header">
        <div class="container">
            <div class="row align-items-center">
                <!-- Social Icons -->
                <div class="col-md-3">
                    <div class="social-icons">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-youtube"></i></a>
                        <a href="#"><i class="fab fa-tiktok"></i></a>
                    </div>
                </div>
                
                <!-- Logo -->
                <div class="col-md-6 text-center">
                    <div class="logo">
                        <a href="index.html">
                            <img src="assets/logo.png" alt="WebBanHoa Logo" class="img-fluid">
                        </a>
                    </div>
                </div>
                
                <!-- Search & Cart -->
                <div class="col-md-3">
                    <div class="search-cart">
                        <div class="search-box">
                            <input type="text" placeholder="Tìm kiếm sản phẩm..." id="searchInput">
                            <button type="button" class="search-btn">
                                <i class="fas fa-search"></i>
                            </button>
                        </div>
                        <div class="cart-icon">
                            <a href="cart.html">
                                <i class="fas fa-shopping-bag"></i>
                                <span class="cart-badge" id="cartBadge">0</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="main-nav">
        <div class="container">
            <div class="nav-wrapper">
                <ul class="nav-menu" id="navMenu">
                    <li class="nav-item dropdown">
                        <a href="#" class="nav-link">
                            Hoa sinh nhật <i class="fas fa-chevron-down"></i>
                        </a>
                        <ul class="dropdown-menu">
                            <li><a href="product-grid.html?category=birthday">Bó hoa sinh nhật</a></li>
                            <li><a href="product-grid.html?category=birthday-special">Hoa sinh nhật đặc biệt</a></li>
                            <li><a href="product-grid.html?category=birthday-premium">Hoa sinh nhật cao cấp</a></li>
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <a href="#" class="nav-link">
                            Hoa khai trương <i class="fas fa-chevron-down"></i>
                        </a>
                        <ul class="dropdown-menu">
                            <li><a href="product-grid.html?category=opening">Kệ hoa khai trương</a></li>
                            <li><a href="product-grid.html?category=opening-big">Kệ hoa lớn</a></li>
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <a href="#" class="nav-link">
                            Chủ đề <i class="fas fa-chevron-down"></i>
                        </a>
                        <ul class="dropdown-menu">
                            <li><a href="product-grid.html?category=love">Hoa tình yêu</a></li>
                            <li><a href="product-grid.html?category=wedding">Hoa cưới</a></li>
                            <li><a href="product-grid.html?category=funeral">Hoa viếng</a></li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a href="product-grid.html" class="nav-link">Tất cả sản phẩm</a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link">Khuyến mãi</a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link">Liên hệ</a>
                    </li>
                </ul>
                
                <!-- Mobile Menu Toggle -->
                <button class="mobile-menu-toggle" id="mobileMenuToggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
        </div>
    </nav>

    <!-- Cart Content -->
    <section class="cart-section">
        <div class="container">
            <!-- Breadcrumb -->
            <nav aria-label="breadcrumb" class="breadcrumb-nav">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="index.html">Trang chủ</a></li>
                    <li class="breadcrumb-item active">Giỏ hàng</li>
                </ol>
            </nav>

            <h1 class="page-title">Giỏ hàng của bạn</h1>

            <div class="row">
                <div class="col-lg-8">
                    <!-- Cart Items -->
                    <div class="cart-items" id="cartItems">
                        <!-- Cart items will be loaded here by JavaScript -->
                    </div>
                </div>
                
                <div class="col-lg-4">
                    <!-- Cart Summary -->
                    <div class="cart-summary">
                        <h4>Tóm tắt đơn hàng</h4>
                        
                        <div class="summary-row">
                            <span>Tạm tính:</span>
                            <span id="subtotal">0 VNĐ</span>
                        </div>
                        
                        <div class="summary-row">
                            <span>Phí vận chuyển:</span>
                            <span id="shipping">30,000 VNĐ</span>
                        </div>
                        
                        <hr>
                        
                        <div class="summary-row total">
                            <span>Tổng cộng:</span>
                            <span id="total">30,000 VNĐ</span>
                        </div>
                        
                        <button class="btn btn-primary w-100 mt-3" id="checkoutBtn">
                            Tiến hành thanh toán
                        </button>
                        
                        <a href="product-grid.html" class="btn btn-outline-secondary w-100 mt-2">
                            Tiếp tục mua sắm
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Floating Contact Bar -->
    <div class="floating-contact-bar">
        <div class="container">
            <div class="row">
                <div class="col-4">
                    <a href="tel:19001234" class="contact-item">
                        <i class="fas fa-phone"></i>
                        <span>Gọi điện</span>
                    </a>
                </div>
                <div class="col-4">
                    <a href="https://zalo.me/19001234" class="contact-item">
                        <i class="fab fa-facebook-messenger"></i>
                        <span>Zalo</span>
                    </a>
                </div>
                <div class="col-4">
                    <a href="tel:19001235" class="contact-item">
                        <i class="fas fa-phone-alt"></i>
                        <span>Số khác</span>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-md-4">
                    <div class="footer-section">
                        <h4>WebBanHoa</h4>
                        <p>Cửa hàng hoa tươi uy tín với hơn 10 năm kinh nghiệm trong ngành.</p>
                        <div class="social-links">
                            <a href="#"><i class="fab fa-facebook-f"></i></a>
                            <a href="#"><i class="fab fa-instagram"></i></a>
                            <a href="#"><i class="fab fa-youtube"></i></a>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="footer-section">
                        <h4>Liên kết</h4>
                        <ul>
                            <li><a href="#">Về chúng tôi</a></li>
                            <li><a href="#">Sản phẩm</a></li>
                            <li><a href="#">Khuyến mãi</a></li>
                            <li><a href="#">Liên hệ</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="footer-section">
                        <h4>Thông tin</h4>
                        <div class="contact-info">
                            <p><i class="fas fa-map-marker-alt"></i> 123 Đường ABC, Quận 1, TP.HCM</p>
                            <p><i class="fas fa-phone"></i> 1900 1234</p>
                            <p><i class="fas fa-envelope"></i> info@webbanhoa.com</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/scripts.js"></script>
    <script>
        // Cart specific script
        document.addEventListener('DOMContentLoaded', function() {
            loadCartItems();
            updateCartSummary();
        });
        
        function loadCartItems() {
            const cart = JSON.parse(localStorage.getItem('cart') || '[]');
            const cartItemsContainer = document.getElementById('cartItems');
            
            if (cart.length === 0) {
                cartItemsContainer.innerHTML = `
                    <div class="empty-cart text-center py-5">
                        <i class="fas fa-shopping-cart fa-3x text-muted mb-3"></i>
                        <h4>Giỏ hàng trống</h4>
                        <p>Bạn chưa có sản phẩm nào trong giỏ hàng</p>
                        <a href="product-grid.html" class="btn btn-primary">Bắt đầu mua sắm</a>
                    </div>
                `;
                return;
            }
            
            cartItemsContainer.innerHTML = cart.map(item => `
                <div class="cart-item" data-id="${item.id}">
                    <div class="row align-items-center">
                        <div class="col-md-2">
                            <img src="${item.image}" alt="${item.name}" class="img-fluid">
                        </div>
                        <div class="col-md-4">
                            <h5>${item.name}</h5>
                            <p class="text-muted">${item.description}</p>
                        </div>
                        <div class="col-md-2">
                            <div class="price">${formatPrice(item.price)}</div>
                        </div>
                        <div class="col-md-2">
                            <div class="quantity-controls">
                                <button class="btn btn-sm btn-outline-secondary" onclick="updateQuantity(${item.id}, -1)">
                                    <i class="fas fa-minus"></i>
                                </button>
                                <span class="quantity">${item.quantity}</span>
                                <button class="btn btn-sm btn-outline-secondary" onclick="updateQuantity(${item.id}, 1)">
                                    <i class="fas fa-plus"></i>
                                </button>
                            </div>
                        </div>
                        <div class="col-md-2">
                            <div class="item-total">${formatPrice(item.price * item.quantity)}</div>
                            <button class="btn btn-sm btn-outline-danger mt-1" onclick="removeItem(${item.id})">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }
        
        function updateQuantity(productId, change) {
            let cart = JSON.parse(localStorage.getItem('cart') || '[]');
            const itemIndex = cart.findIndex(item => item.id === productId);
            
            if (itemIndex !== -1) {
                cart[itemIndex].quantity += change;
                
                if (cart[itemIndex].quantity <= 0) {
                    cart.splice(itemIndex, 1);
                }
                
                localStorage.setItem('cart', JSON.stringify(cart));
                loadCartItems();
                updateCartSummary();
                updateCartBadge();
            }
        }
        
        function removeItem(productId) {
            let cart = JSON.parse(localStorage.getItem('cart') || '[]');
            cart = cart.filter(item => item.id !== productId);
            localStorage.setItem('cart', JSON.stringify(cart));
            loadCartItems();
            updateCartSummary();
            updateCartBadge();
        }
        
        function updateCartSummary() {
            const cart = JSON.parse(localStorage.getItem('cart') || '[]');
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const shipping = 30000;
            const total = subtotal + shipping;
            
            document.getElementById('subtotal').textContent = formatPrice(subtotal);
            document.getElementById('total').textContent = formatPrice(total);
        }
        
        function formatPrice(price) {
            return new Intl.NumberFormat('vi-VN').format(price) + ' VNĐ';
        }
        
        // Checkout button
        document.getElementById('checkoutBtn').addEventListener('click', function() {
            const cart = JSON.parse(localStorage.getItem('cart') || '[]');
            if (cart.length === 0) {
                alert('Giỏ hàng trống!');
                return;
            }
            window.location.href = 'checkout.html';
        });
    </script>
</body>
</html>
